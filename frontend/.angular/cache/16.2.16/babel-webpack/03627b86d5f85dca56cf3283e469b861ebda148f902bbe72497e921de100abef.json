{"ast":null,"code":"import { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nclass ApiInterceptor {\n  constructor(authService) {\n    this.authService = authService;\n  }\n  intercept(req, next) {\n    const token = this.authService.getToken();\n    console.log('[API Interceptor] Token:', token ? 'Present' : 'Missing');\n    console.log('[API Interceptor] Request URL:', req.url);\n    if (token) {\n      console.log('[API Interceptor] Adding Authorization header');\n      req = req.clone({\n        setHeaders: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    }\n    return next.handle(req).pipe(catchError(error => {\n      console.log('[API Interceptor] Error Status:', error.status);\n      if (error.status === 401) {\n        this.authService.logout();\n      }\n      return throwError(() => error);\n    }));\n  }\n  static {\n    this.ɵfac = function ApiInterceptor_Factory(t) {\n      return new (t || ApiInterceptor)(i0.ɵɵinject(i1.AuthService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ApiInterceptor,\n      factory: ApiInterceptor.ɵfac\n    });\n  }\n}\nexport { ApiInterceptor };","map":{"version":3,"names":["throwError","catchError","ApiInterceptor","constructor","authService","intercept","req","next","token","getToken","console","log","url","clone","setHeaders","Authorization","handle","pipe","error","status","logout","i0","ɵɵinject","i1","AuthService","factory","ɵfac"],"sources":["C:\\Users\\vijay\\OneDrive\\Desktop\\Personal Projects\\Airtribe_Project\\CodeRank\\frontend\\src\\app\\core\\interceptors\\api.interceptor.ts"],"sourcesContent":["/**\r\n * HTTP Interceptor for API requests\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport {\r\n  HttpInterceptor,\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpErrorResponse,\r\n} from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Injectable()\r\nexport class ApiInterceptor implements HttpInterceptor {\r\n  constructor(private authService: AuthService) {}\r\n\r\n  intercept(\r\n    req: HttpRequest<unknown>,\r\n    next: HttpHandler,\r\n  ): Observable<HttpEvent<unknown>> {\r\n    const token = this.authService.getToken();\r\n\r\n    console.log('[API Interceptor] Token:', token ? 'Present' : 'Missing');\r\n    console.log('[API Interceptor] Request URL:', req.url);\r\n\r\n    if (token) {\r\n      console.log('[API Interceptor] Adding Authorization header');\r\n      req = req.clone({\r\n        setHeaders: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n    }\r\n\r\n    return next.handle(req).pipe(\r\n      catchError((error: HttpErrorResponse) => {\r\n        console.log('[API Interceptor] Error Status:', error.status);\r\n        if (error.status === 401) {\r\n          this.authService.logout();\r\n        }\r\n        return throwError(() => error);\r\n      }),\r\n    );\r\n  }\r\n}\r\n"],"mappings":"AAYA,SAAqBA,UAAU,QAAQ,MAAM;AAC7C,SAASC,UAAU,QAAQ,gBAAgB;;;AAG3C,MACaC,cAAc;EACzBC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;EAAgB;EAE/CC,SAASA,CACPC,GAAyB,EACzBC,IAAiB;IAEjB,MAAMC,KAAK,GAAG,IAAI,CAACJ,WAAW,CAACK,QAAQ,EAAE;IAEzCC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEH,KAAK,GAAG,SAAS,GAAG,SAAS,CAAC;IACtEE,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEL,GAAG,CAACM,GAAG,CAAC;IAEtD,IAAIJ,KAAK,EAAE;MACTE,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;MAC5DL,GAAG,GAAGA,GAAG,CAACO,KAAK,CAAC;QACdC,UAAU,EAAE;UACVC,aAAa,EAAE,UAAUP,KAAK;;OAEjC,CAAC;;IAGJ,OAAOD,IAAI,CAACS,MAAM,CAACV,GAAG,CAAC,CAACW,IAAI,CAC1BhB,UAAU,CAAEiB,KAAwB,IAAI;MACtCR,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEO,KAAK,CAACC,MAAM,CAAC;MAC5D,IAAID,KAAK,CAACC,MAAM,KAAK,GAAG,EAAE;QACxB,IAAI,CAACf,WAAW,CAACgB,MAAM,EAAE;;MAE3B,OAAOpB,UAAU,CAAC,MAAMkB,KAAK,CAAC;IAChC,CAAC,CAAC,CACH;EACH;;;uBA9BWhB,cAAc,EAAAmB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA;IAAA;EAAA;;;aAAdtB,cAAc;MAAAuB,OAAA,EAAdvB,cAAc,CAAAwB;IAAA;EAAA;;SAAdxB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}